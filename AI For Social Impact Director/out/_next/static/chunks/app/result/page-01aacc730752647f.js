(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{6112:function(e,t,r){Promise.resolve().then(r.bind(r,3857))},3857:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var a=r(7437),l=r(2265),s=r(9376),o=r(429),i=r(7648);function n(){var e,t;(0,s.useRouter)();let[r,n]=(0,l.useState)(""),[d,c]=(0,l.useState)(null),[m,u]=(0,l.useState)("");return(0,l.useEffect)(()=>{try{let e=sessionStorage.getItem("userScript")||"",t=sessionStorage.getItem("videoData"),r=sessionStorage.getItem("errorMessage")||"";if(n(e),u(r),t)try{let e=JSON.parse(t);console.log("Video data loaded:",e),console.log("Scenes:",e.scenes),c(e)}catch(t){console.error("Error parsing video data:",t),c({status:"error",script:e,error:"Failed to parse video data"})}else console.warn("No video data found in sessionStorage"),e&&c({status:"saved",script:e,storyboard:{title:e.split("\n")[0]||"SDG Animation",summary:e.substring(0,200)}})}catch(e){console.error("Error loading result data:",e),u("Unable to load saved data. Please try creating a new story.")}},[]),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8 bg-gradient-to-br from-green-50 to-blue-50",children:(0,a.jsxs)(o.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-4xl w-full",children:[(0,a.jsxs)(o.E.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-center mb-8",children:[(0,a.jsx)(o.E.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,repeatDelay:1},className:"text-8xl mb-4",children:"\uD83C\uDF89"}),(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:m?"Your Story is Saved!":"Your Movie is Ready!"}),(0,a.jsx)("p",{className:"text-xl text-gray-700",children:m?"Your story has been recorded. Check back soon for your animation!":"Watch your SDG animation below"})]}),(0,a.jsxs)(o.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"bg-white rounded-xl shadow-2xl p-8 mb-6",children:[(null==d?void 0:null===(e=d.storyboard)||void 0===e?void 0:e.title)&&(0,a.jsx)("h2",{className:"text-3xl font-bold text-center mb-6 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:d.storyboard.title}),m&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-yellow-50 border border-yellow-300 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-yellow-800 mb-2",children:[(0,a.jsx)("strong",{children:"Note:"})," ",m]}),(null==d?void 0:d.details)&&(0,a.jsxs)("details",{className:"mt-2",children:[(0,a.jsx)("summary",{className:"text-yellow-700 text-sm cursor-pointer hover:text-yellow-900",children:"Show technical details"}),(0,a.jsx)("pre",{className:"mt-2 text-xs bg-yellow-100 p-2 rounded overflow-auto",children:d.details})]}),(0,a.jsx)("p",{className:"text-yellow-700 text-sm mt-2",children:"\uD83D\uDCA1 Check the server console (where you ran npm run dev) for detailed error logs."})]}),!1,(null==d?void 0:d.video_url)?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your Generated Animation Video"}),(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"border-2 border-purple-200 rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-100",children:(0,a.jsx)("video",{src:d.video_url,controls:!0,className:"w-full h-full",onError:e=>{try{console.error("Video failed to load:",d.video_url),e.target&&(e.target.style.display="none",e.target.parentElement&&(e.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-500">Video failed to load</div>'))}catch(e){console.error("Error handling video error:",e)}},onLoadedData:()=>{try{console.log("Video loaded successfully:",d.video_url)}catch(e){console.error("Error in video load handler:",e)}},children:"Your browser does not support the video tag."})})})]}):(null==d?void 0:d.scenes)&&d.scenes.length>0?(0,a.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Animation Storyboard"}),d.scenes.map((e,t)=>(0,a.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+.2*t},className:"border-2 border-purple-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4",children:[(0,a.jsxs)("h4",{className:"font-bold text-lg text-gray-800 mb-2",children:["Scene ",e.sceneNumber]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description})]}),(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-100",children:e.videoUrl?(0,a.jsx)("video",{src:e.videoUrl,controls:!0,className:"w-full h-full",onError:t=>{try{console.error("Scene video failed to load:",e.videoUrl),t.target&&(t.target.style.display="none",t.target.parentElement&&(t.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-500">Video failed to load</div>'))}catch(e){console.error("Error handling scene video error:",e)}},children:"Your browser does not support the video tag."}):e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:"Scene ".concat(e.sceneNumber),className:"w-full h-full object-cover",onError:t=>{try{console.error("Image failed to load:",e.imageUrl),t.target&&(t.target.style.display="none",t.target.parentElement&&(t.target.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-500">Image failed to load</div>'))}catch(e){console.error("Error handling image error:",e)}},onLoad:()=>{try{console.log("Image loaded successfully:",e.imageUrl)}catch(e){console.error("Error in image load handler:",e)}}}):null})]},t))]}):(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 rounded-lg overflow-hidden mb-6 aspect-video flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(o.E.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},className:"text-6xl mb-4",children:"⏳"}),(0,a.jsx)("p",{className:"text-gray-600 font-semibold mb-2",children:"Generating Images..."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:d?"The AI is creating your animation scenes. This may take a moment...":"No video data available. Please go back and generate again."}),!d&&(0,a.jsx)(i.default,{href:"/studio",className:"mt-4 inline-block",children:(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-purple-600 text-white font-bold py-2 px-6 rounded-full",children:"Go to Studio"})})]}),(0,a.jsx)("div",{className:"absolute top-4 right-4 text-2xl",children:"\uD83C\uDFAC"}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4 text-2xl",children:"✨"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Video Details"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,a.jsx)("strong",{children:"Model:"})," ",(null==d?void 0:d.model)||"Luma Dream Machine"]}),(null==d?void 0:d.video_url)&&(0,a.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,a.jsx)("strong",{children:"Video URL:"})," ",(0,a.jsx)("a",{href:d.video_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:d.video_url})]}),(0,a.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,a.jsx)("strong",{children:"Style:"})," 2D Animation with bright colors"]}),(null==d?void 0:null===(t=d.storyboard)||void 0===t?void 0:t.summary)&&(0,a.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,a.jsx)("strong",{children:"Summary:"})," ",d.storyboard.summary]}),(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:(0,a.jsx)("strong",{children:"Your Script:"})}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 italic bg-white p-3 rounded border-l-4 border-purple-500",children:r||"No script available"})]})]})})]}),(0,a.jsxs)(o.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex gap-4 justify-center flex-wrap",children:[(0,a.jsx)(i.default,{href:"/studio",children:(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl",children:"Create Another Movie \uD83C\uDFAC"})}),(0,a.jsx)(i.default,{href:"/",children:(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl",children:"Back to Home \uD83C\uDFE0"})})]})]})})}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[507,971,117,744],function(){return e(e.s=6112)}),_N_E=e.O()}]);